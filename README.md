# laravel-query-astro
Laravel采集每日星座运势，由于目标语言是台湾正体，所以使用[Overtrue\PHPOpenCC](https://github.com/overtrue/php-opencc)转为简体入库


## 新增AstroV2

- [x] 增加采集代理
- [x] 本日运势采集
- [x] 明日运势采集
- [x] 本周运势采集
- [x] 本月运势采集

## 安装

```shell
$ cp .env.example .env

$ composer install

$ php artisan key:gen

$ php artisan migrate
```
## 使用

#### 1. 采集入库

```shell
$ php artisan astro:v2
开始采集星座运势数据...
开始采集2023-06-24星座运势
 12/12 [▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓] 100%
采集2023-06-24星座运势完成！
开始采集2023-06-25星座运势
 12/12 [▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓] 100%
采集2023-06-25星座运势完成！
开始采集2023-06-19 ~ 2023-06-25星座运势
 12/12 [▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓] 100%
采集2023-06-19 ~ 2023-06-25星座运势完成！
开始采集6月星座运势
 12/12 [▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓] 100%
采集6月星座运势完成！
全部星座运势采集入库完成！
```

#### 3. 星座索引

```php
protected $astros = [
    0 => "白羊座",
    1 => "金牛座",
    2 => "双子座",
    3 => "巨蟹座",
    4 => "狮子座",
    5 => "处女座",
    6 => "天秤座",
    7 => "天蝎座",
    8 => "射手座",
    9 => "摩羯座",
    10 => "水瓶座",
    11 => "双鱼座"
];
```

#### 3. 查询

查询方式 `php artisan astro:query <索引ID> <查询模式 1今日 2明日 3本周 4本月>`
```shell
$ php artisan astro:query 4 1
狮子座 - 今日运势(2023-06-24)
今日短评: 忠言逆耳利于行。
幸运数字: 6
幸运颜色: 玳瑁棕
幸运方位: 西北方向
今日吉时: 2:00-4:00pm
速配星座: 天蝎座
整体指数: 3
整体运势: 今天容易被人当面指出缺点，有点不服气，但是忠言逆耳利于行，既然指出了就要虚心接受。恋情狂热，但是占有欲太强会有不少问题。学习欲望强烈，是温故而知新的好时机。
爱情指数: 3
爱情运势: 常听他人吐苦水，你自己的情感困扰却闷在心里，不知向谁诉说。学会倾诉，你会好受些唷！
事(学)业指数: 3
事(学)业运势: 事情很多，需要你耐心处理。不过，容易得到朋友的帮助，让你感觉轻松很多。
财运指数: 2
财运运势: 小心异性居心不良，想从你口中打探出商业秘密。
```

```shell
$ php artisan astro:query 4 2
狮子座 - 明日运势(2023-06-25)
今日短评: 心情像花一样盛开的一天。
幸运数字: 5
幸运颜色: 玉髓红
幸运方位: 正北方向
今日吉时: 11:00-12:00am
速配星座: 天秤座
整体指数: 3
整体运势: 学习易在今天收到成效，并受到家长的肯定，保持谦逊便会有更明显的进步；今天随好友聚餐，很能表现自己举止得体、谈吐风趣的一面，让你春风得意、满面红光，不过也不可太张扬哦；会收到意想不到的表白，小心因兴奋过头而使自己失去判断力。
爱情指数: 4
爱情运势: 很久没有对心爱的人说甜言蜜语了吗？今日就是表达爱意的时候，让对方感受你的温柔。
事(学)业指数: 3
事(学)业运势: 精力旺盛，期待获得认可，有积极的行动。但要注意方式与方法，别急于求成。
财运指数: 3
财运运势: 良好的人际关系，能为你带来好的财运。
```
```shell
$ php artisan astro:query 4 3
狮子座 - 本周运势(2023-06-19~2023-06-25)
致胜技巧: 卸下伪装，呈现真实。
爱情秘笈: 一个肯定的眼神，就能够温暖对方的心。
速配星座: 摩羯座
幸运日: 星期四
幸运服装: 另类装
幸运数字: 2
整体指数: 3
整体运势: 本周你的协调与管理能力很突出，这会使你在团队协作中收益良多，充当他人的和事佬你也能做得得心应手。
爱情指数: 4
爱情运势: 对于恋人而言本周你将充当着一名得力助手的角色，可以为其分忧解难；单身者有机会帮助到心仪对象，促使对方对你的印象更深也更好。
事(学)业指数: 3
事(学)业运势: 工作学习常常因为你躁动的情绪变得特别麻烦，其实事情本身并不复杂，凭借你的专业水平就能够将每一件事都处理好，只是在此之前应先把情绪整理好才行。
财运指数: 2
财运运势: 有大量消费的迹象，在人际方面的支出较多，如送红包、与老同学聚会等。另外，女性的购物欲也在潜滋暗长，到了周末才发现自己这周的花费早已超出预算。
```

```shell
$ php artisan astro:query 4 4
狮子座 - 本月运势(6月)
本月优势: 合作意识强，工作愉快，效率高。
本月弱势: 合作意识强，工作愉快，效率高。
休闲解压: 玩西洋棋
贵人方位: 西南方向
烦人星座: 双子座
贴心星座: 摩羯座
财神星座: 射手座
整体指数: 3
整体运势: 这个月各方面表现平平，爱情少有起色，单身者越主动，成功率越高；工作上想像力丰富，为你节省了不少时间；投资理财若能请教专业人士，会有明显的效果。
爱情指数: 3
爱情运势: 单身者：月初和月末爱情运还不错，适合扮演主动者的角色，遇到心仪对象就主动告白吧，千万不要怕失败，就算第一次不成功，只要再接再厉，对方定会被你的诚意打动。月中得到朋友帮助，有机会结识到新的异性朋友，但来电率低，难以有实质性进展。\r\n恋爱者：恋爱中的人受到周围朋友喜事的影响，想结婚的念头特别强烈，可试探一番，若对方对此并不感兴趣，那就即时喊停，别把对方逼得太紧。不妨把精力放在工作上，为将来的幸福赚取更多的面包，对感情的加速发展才更有益。
事(学)业指数: 4
事(学)业运势: 上班族：本月能够体会到团队合作的重要性，与同事一起共同完成一件大事的概率很高，有时候必要的退让和妥协反而会赢来意想不到的理想成绩。下半月富有极强的创造力，能够经受住难题的考验，获得上司提拔。\r\n学生：学习能力提升明显的一个月，能够主动与老师同学沟通解题时遇到的难处。拒绝一个人在迷宫中绕圈子，虚心请教，不仅节省了时间，也能获得不错的解题技巧。
财运指数: 3
财运运势: 本月对财务的管理有些随意，花钱无计划性让你少有结余。虽说花钱享受生活是一件极其快乐的事，但如果不能有所节制，易因感冒、头痛等身体不适，为医院贡献不少钱财。尤其是月中要特别注意身体，不要熬夜看电视了。
```

#### 4. 每日自动采集

在app/Console/Kernel.php中加入
```php
protected function schedule(Schedule $schedule): void
{
    $schedule->command('astro:v2')->daily();
}
```

## License

MIT
